==367765== Helgrind, a thread error detector
==367765== Copyright (C) 2007-2017, and GNU GPL'd, by OpenWorks LLP et al.
==367765== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info
==367765== Command: ./core_insertion_performance_test /home/cs316/wbai/unipartite_graph/small_data/non_temporal_graph/ lasagne-yahoo 14
==367765== Parent PID: 268677
==367765== 
==367765== ---Thread-Announcement------------------------------------------
==367765== 
==367765== Thread #9 was created
==367765==    at 0x4E5A152: clone (clone.S:71)
==367765==    by 0x4AC42EB: create_thread (createthread.c:101)
==367765==    by 0x4AC5E0F: pthread_create@@GLIBC_2.2.5 (pthread_create.c:817)
==367765==    by 0x4842917: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==367765==    by 0x4C150A8: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==367765==    by 0x4AEC14E: scnu::thread_pool::thread_pool(unsigned int) (in /home/cs316/wbai/scnu/lib/libthread.so)
==367765==    by 0x4A36740: scnu::abstract_graph_io::load_graph(std::shared_ptr<std::vector<std::shared_ptr<scnu::abstract_edge>, std::allocator<std::shared_ptr<scnu::abstract_edge> > > > const&, unsigned int) (in /home/cs316/wbai/scnu/lib/libio.so)
==367765==    by 0x124C67: main (in /home/cs316/wbai/scnu/test/src/core_test/core_insertion_performance_test)
==367765== 
==367765== ---Thread-Announcement------------------------------------------
==367765== 
==367765== Thread #1 is the program's root thread
==367765== 
==367765== ----------------------------------------------------------------
==367765== 
==367765== Possible data race during read of size 1 at 0x34F13590 by thread #9
==367765== Locks held: none
==367765==    at 0x4AEB622: scnu::thread_pool::worker_thread(unsigned int) (in /home/cs316/wbai/scnu/lib/libthread.so)
==367765==    by 0x4C14DE3: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==367765==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==367765==    by 0x4AC5608: start_thread (pthread_create.c:477)
==367765==    by 0x4E5A162: clone (clone.S:95)
==367765== 
==367765== This conflicts with a previous write of size 1 by thread #1
==367765== Locks held: none
==367765==    at 0x4AEAF88: scnu::thread_pool::wait_end() (in /home/cs316/wbai/scnu/lib/libthread.so)
==367765==    by 0x4AEB155: scnu::thread_pool::~thread_pool() (in /home/cs316/wbai/scnu/lib/libthread.so)
==367765==    by 0x497FC25: void __gnu_cxx::new_allocator<scnu::thread_pool>::destroy<scnu::thread_pool>(scnu::thread_pool*) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x497F8B6: void std::allocator_traits<std::allocator<scnu::thread_pool> >::destroy<scnu::thread_pool>(std::allocator<scnu::thread_pool>&, scnu::thread_pool*) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x497ED96: std::_Sp_counted_ptr_inplace<scnu::thread_pool, std::allocator<scnu::thread_pool>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4A36F14: scnu::abstract_graph_io::load_graph(std::shared_ptr<std::vector<std::shared_ptr<scnu::abstract_edge>, std::allocator<std::shared_ptr<scnu::abstract_edge> > > > const&, unsigned int) (in /home/cs316/wbai/scnu/lib/libio.so)
==367765==    by 0x124C67: main (in /home/cs316/wbai/scnu/test/src/core_test/core_insertion_performance_test)
==367765==  Address 0x34f13590 is 16 bytes inside a block of size 136 alloc'd
==367765==    at 0x483CF03: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==367765==    by 0x4A36710: scnu::abstract_graph_io::load_graph(std::shared_ptr<std::vector<std::shared_ptr<scnu::abstract_edge>, std::allocator<std::shared_ptr<scnu::abstract_edge> > > > const&, unsigned int) (in /home/cs316/wbai/scnu/lib/libio.so)
==367765==    by 0x124C67: main (in /home/cs316/wbai/scnu/test/src/core_test/core_insertion_performance_test)
==367765==  Block was alloc'd by thread #1
==367765== 
==367765== ---Thread-Announcement------------------------------------------
==367765== 
==367765== Thread #62 was created
==367765==    at 0x4E5A152: clone (clone.S:71)
==367765==    by 0x4AC42EB: create_thread (createthread.c:101)
==367765==    by 0x4AC5E0F: pthread_create@@GLIBC_2.2.5 (pthread_create.c:817)
==367765==    by 0x4842917: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==367765==    by 0x4C150A8: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==367765==    by 0x4AEC14E: scnu::thread_pool::thread_pool(unsigned int) (in /home/cs316/wbai/scnu/lib/libthread.so)
==367765==    by 0x4979E20: void __gnu_cxx::new_allocator<scnu::thread_pool>::construct<scnu::thread_pool, unsigned int&>(scnu::thread_pool*, unsigned int&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4977DBD: void std::allocator_traits<std::allocator<scnu::thread_pool> >::construct<scnu::thread_pool, unsigned int&>(std::allocator<scnu::thread_pool>&, scnu::thread_pool*, unsigned int&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4974CC5: std::_Sp_counted_ptr_inplace<scnu::thread_pool, std::allocator<scnu::thread_pool>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<unsigned int&>(std::allocator<scnu::thread_pool>, unsigned int&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4970BA3: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<scnu::thread_pool, std::allocator<scnu::thread_pool>, unsigned int&>(scnu::thread_pool*&, std::_Sp_alloc_shared_tag<std::allocator<scnu::thread_pool> >, unsigned int&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x496CE0F: std::__shared_ptr<scnu::thread_pool, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<scnu::thread_pool>, unsigned int&>(std::_Sp_alloc_shared_tag<std::allocator<scnu::thread_pool> >, unsigned int&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4969E5E: std::shared_ptr<scnu::thread_pool>::shared_ptr<std::allocator<scnu::thread_pool>, unsigned int&>(std::_Sp_alloc_shared_tag<std::allocator<scnu::thread_pool> >, unsigned int&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765== 
==367765== ---Thread-Announcement------------------------------------------
==367765== 
==367765== Thread #70 was created
==367765==    at 0x4E5A152: clone (clone.S:71)
==367765==    by 0x4AC42EB: create_thread (createthread.c:101)
==367765==    by 0x4AC5E0F: pthread_create@@GLIBC_2.2.5 (pthread_create.c:817)
==367765==    by 0x4842917: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==367765==    by 0x4C150A8: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==367765==    by 0x4AEC14E: scnu::thread_pool::thread_pool(unsigned int) (in /home/cs316/wbai/scnu/lib/libthread.so)
==367765==    by 0x4979E20: void __gnu_cxx::new_allocator<scnu::thread_pool>::construct<scnu::thread_pool, unsigned int&>(scnu::thread_pool*, unsigned int&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4977DBD: void std::allocator_traits<std::allocator<scnu::thread_pool> >::construct<scnu::thread_pool, unsigned int&>(std::allocator<scnu::thread_pool>&, scnu::thread_pool*, unsigned int&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4974CC5: std::_Sp_counted_ptr_inplace<scnu::thread_pool, std::allocator<scnu::thread_pool>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<unsigned int&>(std::allocator<scnu::thread_pool>, unsigned int&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4970BA3: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<scnu::thread_pool, std::allocator<scnu::thread_pool>, unsigned int&>(scnu::thread_pool*&, std::_Sp_alloc_shared_tag<std::allocator<scnu::thread_pool> >, unsigned int&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x496CE0F: std::__shared_ptr<scnu::thread_pool, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<scnu::thread_pool>, unsigned int&>(std::_Sp_alloc_shared_tag<std::allocator<scnu::thread_pool> >, unsigned int&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4969E5E: std::shared_ptr<scnu::thread_pool>::shared_ptr<std::allocator<scnu::thread_pool>, unsigned int&>(std::_Sp_alloc_shared_tag<std::allocator<scnu::thread_pool> >, unsigned int&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765== 
==367765== ----------------------------------------------------------------
==367765== 
==367765==  Lock at 0x2FE67E90 was first observed
==367765==    at 0x483FEDF: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==367765==    by 0x4A335A7: scnu::function_wrapper::impl_type<scnu::abstract_graph_io::load_graph(std::shared_ptr<std::vector<std::shared_ptr<scnu::abstract_edge>, std::allocator<std::shared_ptr<scnu::abstract_edge> > > > const&, unsigned int)::{lambda()#1}>::call() (in /home/cs316/wbai/scnu/lib/libio.so)
==367765==    by 0x4AEB5D4: scnu::thread_pool::run_pending_task(unsigned int) (in /home/cs316/wbai/scnu/lib/libthread.so)
==367765==    by 0x4AEB621: scnu::thread_pool::worker_thread(unsigned int) (in /home/cs316/wbai/scnu/lib/libthread.so)
==367765==    by 0x4C14DE3: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==367765==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==367765==    by 0x4AC5608: start_thread (pthread_create.c:477)
==367765==    by 0x4E5A162: clone (clone.S:95)
==367765==  Address 0x2fe67e90 is 16 bytes inside a block of size 56 alloc'd
==367765==    at 0x483CF03: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==367765==    by 0x4979109: __gnu_cxx::new_allocator<std::_Sp_counted_ptr_inplace<std::mutex, std::allocator<std::mutex>, (__gnu_cxx::_Lock_policy)2> >::allocate(unsigned long, void const*) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x497729E: std::allocator_traits<std::allocator<std::_Sp_counted_ptr_inplace<std::mutex, std::allocator<std::mutex>, (__gnu_cxx::_Lock_policy)2> > >::allocate(std::allocator<std::_Sp_counted_ptr_inplace<std::mutex, std::allocator<std::mutex>, (__gnu_cxx::_Lock_policy)2> >&, unsigned long) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4973793: std::__allocated_ptr<std::allocator<std::_Sp_counted_ptr_inplace<std::mutex, std::allocator<std::mutex>, (__gnu_cxx::_Lock_policy)2> > > std::__allocate_guarded<std::allocator<std::_Sp_counted_ptr_inplace<std::mutex, std::allocator<std::mutex>, (__gnu_cxx::_Lock_policy)2> > >(std::allocator<std::_Sp_counted_ptr_inplace<std::mutex, std::allocator<std::mutex>, (__gnu_cxx::_Lock_policy)2> >&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x496F9D3: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::mutex, std::allocator<std::mutex>>(std::mutex*&, std::_Sp_alloc_shared_tag<std::allocator<std::mutex> >) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x496BBAF: std::__shared_ptr<std::mutex, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::mutex>>(std::_Sp_alloc_shared_tag<std::allocator<std::mutex> >) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x496908A: std::shared_ptr<std::mutex>::shared_ptr<std::allocator<std::mutex>>(std::_Sp_alloc_shared_tag<std::allocator<std::mutex> >) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4966EF9: std::shared_ptr<std::mutex> std::allocate_shared<std::mutex, std::allocator<std::mutex>>(std::allocator<std::mutex> const&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4965172: std::shared_ptr<std::mutex> std::make_shared<std::mutex>() (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x49BC39F: scnu::quasi_core_maintenance::insert(std::shared_ptr<scnu::abstract_graph> const&, std::shared_ptr<std::unordered_set<std::shared_ptr<scnu::abstract_edge>, std::hash<std::shared_ptr<scnu::abstract_edge> >, std::equal_to<std::shared_ptr<scnu::abstract_edge> >, std::allocator<std::shared_ptr<scnu::abstract_edge> > > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<unsigned int> const&, unsigned int) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x124E29: main (in /home/cs316/wbai/scnu/test/src/core_test/core_insertion_performance_test)
==367765==  Block was alloc'd by thread #1
==367765== 
==367765== Possible data race during read of size 4 at 0x30A31C9C by thread #62
==367765== Locks held: none
==367765==    at 0x49BF417: scnu::quasi_core_maintenance::remove_unsatisfied_vertices(std::shared_ptr<scnu::abstract_graph> const&, std::shared_ptr<std::unordered_map<unsigned int, std::shared_ptr<std::mutex>, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, std::shared_ptr<std::mutex> > > > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<std::vector<std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > >, std::allocator<std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > > > > > const&, unsigned int, std::shared_ptr<scnu::thread_pool> const&)::{lambda()#1}::operator()() const (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x49C20A9: scnu::function_wrapper::impl_type<scnu::quasi_core_maintenance::remove_unsatisfied_vertices(std::shared_ptr<scnu::abstract_graph> const&, std::shared_ptr<std::unordered_map<unsigned int, std::shared_ptr<std::mutex>, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, std::shared_ptr<std::mutex> > > > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<std::vector<std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > >, std::allocator<std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > > > > > const&, unsigned int, std::shared_ptr<scnu::thread_pool> const&)::{lambda()#1}>::call() (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4AEB5D4: scnu::thread_pool::run_pending_task(unsigned int) (in /home/cs316/wbai/scnu/lib/libthread.so)
==367765==    by 0x4AEB621: scnu::thread_pool::worker_thread(unsigned int) (in /home/cs316/wbai/scnu/lib/libthread.so)
==367765==    by 0x4C14DE3: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==367765==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==367765==    by 0x4AC5608: start_thread (pthread_create.c:477)
==367765==    by 0x4E5A162: clone (clone.S:95)
==367765== 
==367765== This conflicts with a previous write of size 4 by thread #70
==367765== Locks held: 1, at address 0x2FE67E90
==367765==    at 0x49BF491: scnu::quasi_core_maintenance::remove_unsatisfied_vertices(std::shared_ptr<scnu::abstract_graph> const&, std::shared_ptr<std::unordered_map<unsigned int, std::shared_ptr<std::mutex>, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, std::shared_ptr<std::mutex> > > > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<std::vector<std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > >, std::allocator<std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > > > > > const&, unsigned int, std::shared_ptr<scnu::thread_pool> const&)::{lambda()#1}::operator()() const (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x49C20A9: scnu::function_wrapper::impl_type<scnu::quasi_core_maintenance::remove_unsatisfied_vertices(std::shared_ptr<scnu::abstract_graph> const&, std::shared_ptr<std::unordered_map<unsigned int, std::shared_ptr<std::mutex>, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, std::shared_ptr<std::mutex> > > > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<std::vector<std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > >, std::allocator<std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > > > > > const&, unsigned int, std::shared_ptr<scnu::thread_pool> const&)::{lambda()#1}>::call() (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4AEB5D4: scnu::thread_pool::run_pending_task(unsigned int) (in /home/cs316/wbai/scnu/lib/libthread.so)
==367765==    by 0x4AEB621: scnu::thread_pool::worker_thread(unsigned int) (in /home/cs316/wbai/scnu/lib/libthread.so)
==367765==    by 0x4C14DE3: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==367765==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==367765==    by 0x4AC5608: start_thread (pthread_create.c:477)
==367765==    by 0x4E5A162: clone (clone.S:95)
==367765==  Address 0x30a31c9c is 12 bytes inside a block of size 16 alloc'd
==367765==    at 0x483CF03: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==367765==    by 0x12F57B: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, unsigned int>, false> >::allocate(unsigned long, void const*) (in /home/cs316/wbai/scnu/test/src/core_test/core_insertion_performance_test)
==367765==    by 0x12F3DE: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, unsigned int>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, unsigned int>, false> >&, unsigned long) (in /home/cs316/wbai/scnu/test/src/core_test/core_insertion_performance_test)
==367765==    by 0x496BF51: std::__detail::_Hash_node<std::pair<unsigned int const, unsigned int>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, unsigned int>, false> > >::_M_allocate_node<std::pair<unsigned int const, unsigned int> >(std::pair<unsigned int const, unsigned int>&&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4969511: std::pair<std::__detail::_Node_iterator<std::pair<unsigned int const, unsigned int>, false, false>, bool> std::_Hashtable<unsigned int, std::pair<unsigned int const, unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_emplace<std::pair<unsigned int const, unsigned int> >(std::integral_constant<bool, true>, std::pair<unsigned int const, unsigned int>&&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x49674DC: std::pair<std::__detail::_Node_iterator<std::pair<unsigned int const, unsigned int>, false, false>, bool> std::__detail::_Insert<unsigned int, std::pair<unsigned int const, unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, false>::insert<std::pair<unsigned int const, unsigned int>, void>(std::pair<unsigned int const, unsigned int>&&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x496566B: std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > >::insert(std::pair<unsigned int const, unsigned int>&&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x49BC45E: scnu::quasi_core_maintenance::insert(std::shared_ptr<scnu::abstract_graph> const&, std::shared_ptr<std::unordered_set<std::shared_ptr<scnu::abstract_edge>, std::hash<std::shared_ptr<scnu::abstract_edge> >, std::equal_to<std::shared_ptr<scnu::abstract_edge> >, std::allocator<std::shared_ptr<scnu::abstract_edge> > > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<unsigned int> const&, unsigned int) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x124E29: main (in /home/cs316/wbai/scnu/test/src/core_test/core_insertion_performance_test)
==367765==  Block was alloc'd by thread #1
==367765== 
==367765== ----------------------------------------------------------------
==367765== 
==367765==  Lock at 0x2FE67E90 was first observed
==367765==    at 0x483FEDF: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==367765==    by 0x4A335A7: scnu::function_wrapper::impl_type<scnu::abstract_graph_io::load_graph(std::shared_ptr<std::vector<std::shared_ptr<scnu::abstract_edge>, std::allocator<std::shared_ptr<scnu::abstract_edge> > > > const&, unsigned int)::{lambda()#1}>::call() (in /home/cs316/wbai/scnu/lib/libio.so)
==367765==    by 0x4AEB5D4: scnu::thread_pool::run_pending_task(unsigned int) (in /home/cs316/wbai/scnu/lib/libthread.so)
==367765==    by 0x4AEB621: scnu::thread_pool::worker_thread(unsigned int) (in /home/cs316/wbai/scnu/lib/libthread.so)
==367765==    by 0x4C14DE3: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==367765==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==367765==    by 0x4AC5608: start_thread (pthread_create.c:477)
==367765==    by 0x4E5A162: clone (clone.S:95)
==367765==  Address 0x2fe67e90 is 16 bytes inside a block of size 56 alloc'd
==367765==    at 0x483CF03: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==367765==    by 0x4979109: __gnu_cxx::new_allocator<std::_Sp_counted_ptr_inplace<std::mutex, std::allocator<std::mutex>, (__gnu_cxx::_Lock_policy)2> >::allocate(unsigned long, void const*) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x497729E: std::allocator_traits<std::allocator<std::_Sp_counted_ptr_inplace<std::mutex, std::allocator<std::mutex>, (__gnu_cxx::_Lock_policy)2> > >::allocate(std::allocator<std::_Sp_counted_ptr_inplace<std::mutex, std::allocator<std::mutex>, (__gnu_cxx::_Lock_policy)2> >&, unsigned long) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4973793: std::__allocated_ptr<std::allocator<std::_Sp_counted_ptr_inplace<std::mutex, std::allocator<std::mutex>, (__gnu_cxx::_Lock_policy)2> > > std::__allocate_guarded<std::allocator<std::_Sp_counted_ptr_inplace<std::mutex, std::allocator<std::mutex>, (__gnu_cxx::_Lock_policy)2> > >(std::allocator<std::_Sp_counted_ptr_inplace<std::mutex, std::allocator<std::mutex>, (__gnu_cxx::_Lock_policy)2> >&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x496F9D3: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::mutex, std::allocator<std::mutex>>(std::mutex*&, std::_Sp_alloc_shared_tag<std::allocator<std::mutex> >) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x496BBAF: std::__shared_ptr<std::mutex, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::mutex>>(std::_Sp_alloc_shared_tag<std::allocator<std::mutex> >) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x496908A: std::shared_ptr<std::mutex>::shared_ptr<std::allocator<std::mutex>>(std::_Sp_alloc_shared_tag<std::allocator<std::mutex> >) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4966EF9: std::shared_ptr<std::mutex> std::allocate_shared<std::mutex, std::allocator<std::mutex>>(std::allocator<std::mutex> const&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4965172: std::shared_ptr<std::mutex> std::make_shared<std::mutex>() (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x49BC39F: scnu::quasi_core_maintenance::insert(std::shared_ptr<scnu::abstract_graph> const&, std::shared_ptr<std::unordered_set<std::shared_ptr<scnu::abstract_edge>, std::hash<std::shared_ptr<scnu::abstract_edge> >, std::equal_to<std::shared_ptr<scnu::abstract_edge> >, std::allocator<std::shared_ptr<scnu::abstract_edge> > > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<unsigned int> const&, unsigned int) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x124E29: main (in /home/cs316/wbai/scnu/test/src/core_test/core_insertion_performance_test)
==367765==  Block was alloc'd by thread #1
==367765== 
==367765== Possible data race during write of size 4 at 0x30A31C9C by thread #62
==367765== Locks held: 1, at address 0x2FE67E90
==367765==    at 0x49BF491: scnu::quasi_core_maintenance::remove_unsatisfied_vertices(std::shared_ptr<scnu::abstract_graph> const&, std::shared_ptr<std::unordered_map<unsigned int, std::shared_ptr<std::mutex>, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, std::shared_ptr<std::mutex> > > > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<std::vector<std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > >, std::allocator<std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > > > > > const&, unsigned int, std::shared_ptr<scnu::thread_pool> const&)::{lambda()#1}::operator()() const (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x49C20A9: scnu::function_wrapper::impl_type<scnu::quasi_core_maintenance::remove_unsatisfied_vertices(std::shared_ptr<scnu::abstract_graph> const&, std::shared_ptr<std::unordered_map<unsigned int, std::shared_ptr<std::mutex>, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, std::shared_ptr<std::mutex> > > > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<std::vector<std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > >, std::allocator<std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > > > > > const&, unsigned int, std::shared_ptr<scnu::thread_pool> const&)::{lambda()#1}>::call() (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4AEB5D4: scnu::thread_pool::run_pending_task(unsigned int) (in /home/cs316/wbai/scnu/lib/libthread.so)
==367765==    by 0x4AEB621: scnu::thread_pool::worker_thread(unsigned int) (in /home/cs316/wbai/scnu/lib/libthread.so)
==367765==    by 0x4C14DE3: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==367765==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==367765==    by 0x4AC5608: start_thread (pthread_create.c:477)
==367765==    by 0x4E5A162: clone (clone.S:95)
==367765== 
==367765== This conflicts with a previous read of size 4 by thread #70
==367765== Locks held: none
==367765==    at 0x49BF4E7: scnu::quasi_core_maintenance::remove_unsatisfied_vertices(std::shared_ptr<scnu::abstract_graph> const&, std::shared_ptr<std::unordered_map<unsigned int, std::shared_ptr<std::mutex>, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, std::shared_ptr<std::mutex> > > > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<std::vector<std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > >, std::allocator<std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > > > > > const&, unsigned int, std::shared_ptr<scnu::thread_pool> const&)::{lambda()#1}::operator()() const (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x49C20A9: scnu::function_wrapper::impl_type<scnu::quasi_core_maintenance::remove_unsatisfied_vertices(std::shared_ptr<scnu::abstract_graph> const&, std::shared_ptr<std::unordered_map<unsigned int, std::shared_ptr<std::mutex>, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, std::shared_ptr<std::mutex> > > > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<std::vector<std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > >, std::allocator<std::shared_ptr<std::unordered_set<unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<unsigned int> > > > > > const&, unsigned int, std::shared_ptr<scnu::thread_pool> const&)::{lambda()#1}>::call() (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4AEB5D4: scnu::thread_pool::run_pending_task(unsigned int) (in /home/cs316/wbai/scnu/lib/libthread.so)
==367765==    by 0x4AEB621: scnu::thread_pool::worker_thread(unsigned int) (in /home/cs316/wbai/scnu/lib/libthread.so)
==367765==    by 0x4C14DE3: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==367765==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==367765==    by 0x4AC5608: start_thread (pthread_create.c:477)
==367765==    by 0x4E5A162: clone (clone.S:95)
==367765==  Address 0x30a31c9c is 12 bytes inside a block of size 16 alloc'd
==367765==    at 0x483CF03: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==367765==    by 0x12F57B: __gnu_cxx::new_allocator<std::__detail::_Hash_node<std::pair<unsigned int const, unsigned int>, false> >::allocate(unsigned long, void const*) (in /home/cs316/wbai/scnu/test/src/core_test/core_insertion_performance_test)
==367765==    by 0x12F3DE: std::allocator_traits<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, unsigned int>, false> > >::allocate(std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, unsigned int>, false> >&, unsigned long) (in /home/cs316/wbai/scnu/test/src/core_test/core_insertion_performance_test)
==367765==    by 0x496BF51: std::__detail::_Hash_node<std::pair<unsigned int const, unsigned int>, false>* std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<unsigned int const, unsigned int>, false> > >::_M_allocate_node<std::pair<unsigned int const, unsigned int> >(std::pair<unsigned int const, unsigned int>&&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x4969511: std::pair<std::__detail::_Node_iterator<std::pair<unsigned int const, unsigned int>, false, false>, bool> std::_Hashtable<unsigned int, std::pair<unsigned int const, unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_emplace<std::pair<unsigned int const, unsigned int> >(std::integral_constant<bool, true>, std::pair<unsigned int const, unsigned int>&&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x49674DC: std::pair<std::__detail::_Node_iterator<std::pair<unsigned int const, unsigned int>, false, false>, bool> std::__detail::_Insert<unsigned int, std::pair<unsigned int const, unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> >, std::__detail::_Select1st, std::equal_to<unsigned int>, std::hash<unsigned int>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, false>::insert<std::pair<unsigned int const, unsigned int>, void>(std::pair<unsigned int const, unsigned int>&&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x496566B: std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > >::insert(std::pair<unsigned int const, unsigned int>&&) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x49BC45E: scnu::quasi_core_maintenance::insert(std::shared_ptr<scnu::abstract_graph> const&, std::shared_ptr<std::unordered_set<std::shared_ptr<scnu::abstract_edge>, std::hash<std::shared_ptr<scnu::abstract_edge> >, std::equal_to<std::shared_ptr<scnu::abstract_edge> >, std::allocator<std::shared_ptr<scnu::abstract_edge> > > > const&, std::shared_ptr<std::unordered_map<unsigned int, unsigned int, std::hash<unsigned int>, std::equal_to<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > const&, std::shared_ptr<unsigned int> const&, unsigned int) (in /home/cs316/wbai/scnu/lib/libcore.so)
==367765==    by 0x124E29: main (in /home/cs316/wbai/scnu/test/src/core_test/core_insertion_performance_test)
==367765==  Block was alloc'd by thread #1
==367765== 
==367765== 
==367765== Use --history-level=approx or =none to gain increased speed, at
==367765== the cost of reduced accuracy of conflicting-access information
==367765== For lists of detected and suppressed errors, rerun with: -s
==367765== ERROR SUMMARY: 30764 errors from 3 contexts (suppressed: 23154153 from 167)
